= provide(:title, "#{pluralize(@properties.count, "apartment")} found")

button#map_toggle.hidden-sm.hidden-md.hidden-lg
  | Map toggle

#search_result_meta
  = render "search_result_meta", search_conditions: nil

.row
  .col-sm-6
    #map [style="height: 500px; width: 100%;"]
  .col-sm-6
    = render "search"

javascript:

  // Pass JSON data to frontend.
  var data = #{ raw Property.properties_json_for_map(@properties) }

  // Create a map initializing with that data.
  var map = new window.App.maps.PropertiesMap(data[0].lngLat, data).map;

  // Do something when user finish moving the map.
  map.on('moveend', () => {

    // TODO: do something.
    console.log("moveend")

  })


  //---
  //---


  // Toggle map.
  $('#map_toggle').on('click', function() {
    $('#map').toggle();
  })

scss:

  #map_toggle {
    float: right;
    color: black;
    &:hover {
      color: black;
      text-decoration: none;
    }
    .flex & {
      margin-right: auto;
    }
  }
  .mapboxgl-popup {
    max-width: 150px;
    max-height: 300px;
    overflow-y: auto;
  }
